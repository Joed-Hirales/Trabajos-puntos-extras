<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pong Mejorado</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background-color: #000;
      color: #fff;
      font-family: Arial, sans-serif;
    }
    canvas {
      border: 2px solid white;
    }
  </style>
</head>
<body>
  <canvas id="pongCanvas" width="800" height="400"></canvas>
  <script>
    const canvas = document.getElementById('pongCanvas');
    const ctx = canvas.getContext('2d');
    const paddleWidth = 10, paddleHeight = 100;
    const ballSize = 10;
    const canvasWidth = canvas.width;
    const canvasHeight = canvas.height;
    let ballSpeed = 3;

    const player1 = {
      x: 10,
      y: (canvasHeight - paddleHeight) / 2,
      speed: 5,
      score: 0,
      upPressed: false,
      downPressed: false
    };

    const player2 = {
      x: canvasWidth - paddleWidth - 10,
      y: (canvasHeight - paddleHeight) / 2,
      speed: 5,
      score: 0,
      upPressed: false,
      downPressed: false
    };

    const ball = {
      x: canvasWidth / 2,
      y: canvasHeight / 2,
      dx: ballSpeed,
      dy: ballSpeed,
    };

    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowUp') player2.upPressed = true;
      if (e.key === 'ArrowDown') player2.downPressed = true;
      if (e.key === 'w' || e.key === 'W') player1.upPressed = true;
      if (e.key === 's' || e.key === 'S') player1.downPressed = true;
    });

    document.addEventListener('keyup', (e) => {
      if (e.key === 'ArrowUp') player2.upPressed = false;
      if (e.key === 'ArrowDown') player2.downPressed = false;
      if (e.key === 'w' || e.key === 'W') player1.upPressed = false;
      if (e.key === 's' || e.key === 'S') player1.downPressed = false;
    });

/*************  ✨ Codeium Command ⭐  *************/
    /**
     * Dibuja un rect ngulo en la pantalla.
     * @param {number} x Coordenada X del rect ngulo.
     * @param {number} y Coordenada Y del rect ngulo.
     * @param {number} width Ancho del rect ngulo.
     * @param {number} height Alto del rect ngulo.
     * @param {string} [color='white'] Color del rect ngulo.
     */
/******  5e9b1e83-aa13-4ba2-a0e0-fd601d69ed1e  *******/
    function drawRect(x, y, width, height, color = 'white') {
      ctx.fillStyle = color;
      ctx.fillRect(x, y, width, height);
    }
    function drawBall(x, y, size, color = 'white') {
      ctx.beginPath();
      ctx.arc(x, y, size, 0, Math.PI * 2);
      ctx.fillStyle = color;
      ctx.fill();
      ctx.closePath();
    }
    function drawText(text, x, y, color = 'white') {
      ctx.fillStyle = color;
      ctx.font = '20px Arial';
      ctx.fillText(text, x, y);
    }
    function movePaddle(player) {
      if (player.upPressed && player.y > 0) {
        player.y -= player.speed;
      }
      if (player.downPressed && player.y < canvasHeight - paddleHeight) {
        player.y += player.speed;
      }
    }
    function moveBall() {
      ball.x += ball.dx;
      ball.y += ball.dy;

      if (ball.y <= 0 || ball.y >= canvasHeight - ballSize) {
        ball.dy *= -1;
      }

      if (
        ball.x <= player1.x + paddleWidth &&
        ball.y >= player1.y &&
        ball.y <= player1.y + paddleHeight
      ) {
        ball.dx *= -1.1; // Aumenta velocidad
        ball.dy *= 1.1;
      }

      if (
        ball.x >= player2.x - ballSize &&
        ball.y >= player2.y &&
        ball.y <= player2.y + paddleHeight
      ) {
        ball.dx *= -1.1;
        ball.dy *= 1.1;
      }

      if (ball.x < 0) {
        player2.score++;
        resetBall();
      } else if (ball.x > canvasWidth) {
        player1.score++;
        resetBall();
      }
    }
    function resetBall() {
      ball.x = canvasWidth / 2;
      ball.y = canvasHeight / 2;
      ball.dx = ballSpeed * (Math.random() > 0.5 ? 1 : -1);
      ball.dy = ballSpeed * (Math.random() > 0.5 ? 1 : -1);
    }

    function drawGame() {
      ctx.clearRect(0, 0, canvasWidth, canvasHeight);

      // Dibujar barras, pelota y puntuaciones
      drawRect(player1.x, player1.y, paddleWidth, paddleHeight);
      drawRect(player2.x, player2.y, paddleWidth, paddleHeight);
      drawBall(ball.x, ball.y, ballSize);
      drawText(`Jugador 1: ${player1.score}`, 20, 30);
      drawText(`Jugador 2: ${player2.score}`, canvasWidth - 150, 30);
    }

    function update() {
      movePaddle(player1);
      movePaddle(player2);
      moveBall();
    }

    function gameLoop() {
      update();
      drawGame();
      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>
